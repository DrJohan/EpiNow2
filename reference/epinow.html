<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Real-time Rt Estimation, Forecasting and Reporting — epinow • EpiNow2</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Real-time Rt Estimation, Forecasting and Reporting — epinow" />
<meta property="og:description" content="Estimate Rt and cases by date of infection, forecast into the future, transform to date
of report and then save summary measures and plots." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EpiNow2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/epiforecasts/EpiNow2">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Real-time Rt Estimation, Forecasting and Reporting</h1>
    
    <div class="hidden name"><code>epinow.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Estimate Rt and cases by date of infection, forecast into the future, transform to date
of report and then save summary measures and plots.</p>
    </div>

    <pre class="usage"><span class='fu'>epinow</span><span class='op'>(</span>
  <span class='va'>reported_cases</span>,
  <span class='va'>model</span>,
  samples <span class='op'>=</span> <span class='fl'>1000</span>,
  <span class='va'>stan_args</span>,
  method <span class='op'>=</span> <span class='st'>"exact"</span>,
  family <span class='op'>=</span> <span class='st'>"negbin"</span>,
  <span class='va'>generation_time</span>,
  <span class='va'>delays</span>,
  gp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>basis_prop <span class='op'>=</span> <span class='fl'>0.3</span>, boundary_scale <span class='op'>=</span> <span class='fl'>2</span>, lengthscale_mean <span class='op'>=</span> <span class='fl'>0</span>, lengthscale_sd
    <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>,
  rt_prior <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fl'>1</span>, sd <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,
  horizon <span class='op'>=</span> <span class='fl'>7</span>,
  estimate_rt <span class='op'>=</span> <span class='cn'>TRUE</span>,
  estimate_week_eff <span class='op'>=</span> <span class='cn'>TRUE</span>,
  estimate_breakpoints <span class='op'>=</span> <span class='cn'>FALSE</span>,
  burn_in <span class='op'>=</span> <span class='fl'>0</span>,
  stationary <span class='op'>=</span> <span class='cn'>FALSE</span>,
  fixed <span class='op'>=</span> <span class='cn'>FALSE</span>,
  fixed_future_rt <span class='op'>=</span> <span class='cn'>FALSE</span>,
  future <span class='op'>=</span> <span class='cn'>FALSE</span>,
  max_execution_time <span class='op'>=</span> <span class='cn'>Inf</span>,
  prior_smoothing_window <span class='op'>=</span> <span class='fl'>7</span>,
  return_fit <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>forecast_model</span>,
  ensemble_type <span class='op'>=</span> <span class='st'>"mean"</span>,
  return_estimates <span class='op'>=</span> <span class='cn'>TRUE</span>,
  keep_samples <span class='op'>=</span> <span class='cn'>TRUE</span>,
  make_plots <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>target_folder</span>,
  <span class='va'>target_date</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>reported_cases</th>
      <td><p>A data frame of confirmed cases (confirm) by date (date). confirm must be integer and date must be
in date format.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>A compiled stan model. By default uses the internal package model.</p></td>
    </tr>
    <tr>
      <th>samples</th>
      <td><p>Numeric, defaults to 1000. Number of samples post warmup.</p></td>
    </tr>
    <tr>
      <th>stan_args</th>
      <td><p>A list of stan arguments to be passed to <code><a href='https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html'>rstan::sampling</a></code> or <code><a href='https://mc-stan.org/rstan/reference/stanmodel-method-vb.html'>rstan::vb</a></code> (when using the "exact"
or "approximate" method). For <code>method = approximate</code> an additional argument <code>trials</code> indicates the number of attempts to make
using variational inference before returning an error (as stochastic failure is possible). The default for this is 5.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>A character string defaults to "exact". Also accepts "approximate". Indicates the fitting method to be used
this can either be "exact" (NUTs sampling) or "approximate" (variational inference). The exact approach returns samples
from the posterior whilst the approximate method returns approximate samples. The approximate method is likely to return results
several order of magnitudes faster than the exact method.</p></td>
    </tr>
    <tr>
      <th>family</th>
      <td><p>A character string indicating the reporting model to use. Defaults to negative
binomial ("negbin") with poisson ("poisson") also supported.</p></td>
    </tr>
    <tr>
      <th>generation_time</th>
      <td><p>A list containing the mean, standard deviation of the mean (mean_sd),
standard deviation (sd), standard deviation of the standard deviation and the maximum allowed value for the
generation time (assuming a gamma distribution).</p></td>
    </tr>
    <tr>
      <th>delays</th>
      <td><p>A list of delays (i.e incubation period/reporting delay) between infection and report.
Each list entry must also be a list containing the mean, standard deviation of the mean (mean_sd),
standard deviation (sd), standard deviation of the standard deviation and the maximum allowed value for the
that delay (assuming a lognormal distribution with all parameters excepting the max allowed value
on the log scale).</p></td>
    </tr>
    <tr>
      <th>gp</th>
      <td><p>List controlling the Gaussian process approximation. Must contain
the <code>basis_prop</code> (number of basis functions based on scaling the time points) which defaults to 0.3 and must be
between 0 and 1 (increasing this increases the accuracy of the approximation and the cost of additional compute.
Must also contain the <code>boundary_scale</code> (multiplied by half the range of the input time series). Increasing this
increases the accuracy of the approximation at the cost of additional compute.
See here: https://arxiv.org/abs/2004.11408 for more information on setting these parameters.
Can optionally also contain the  <code>lengthscale_mean</code> and <code>lengthscale_sd</code>. If these are specified this will override
the defaults of 0 and 2 (normal distributed truncated at zero).</p></td>
    </tr>
    <tr>
      <th>rt_prior</th>
      <td><p>A list contain the mean and standard deviation (sd) of the gamma distributed prior for
Rt. By default this is assumed to be mean 1 with a standard deviation of 1.</p></td>
    </tr>
    <tr>
      <th>horizon</th>
      <td><p>Numeric, defaults to 7. Number of days into the future to forecast.</p></td>
    </tr>
    <tr>
      <th>estimate_rt</th>
      <td><p>Logical, defaults TRUE. Should Rt be estimated when imputing infections.</p></td>
    </tr>
    <tr>
      <th>estimate_week_eff</th>
      <td><p>Logical, defaults TRUE. Should weekly reporting effects be estimated.</p></td>
    </tr>
    <tr>
      <th>estimate_breakpoints</th>
      <td><p>Logical, defaults to FALSE. Should breakpoints in Rt be estimated. If true then <code>reported_cases</code>
must contain a <code>breakpoint</code> variable that is 1 on the dates with breakpoints and otherwise 0. Breakpoints are fit jointly with
a global non-parametric effect and so represent a conservative estimate of breakpoint changes.</p></td>
    </tr>
    <tr>
      <th>burn_in</th>
      <td><p>Numeric, defaults to 0. The number of initial estimates to discard. This argument may be used to reduce
spurious findings when running <code>estimate_infections</code> on a partial timeseries (as the earliest estimates will not be informed by
all cases that occurred only those supplied to <code>estimate_infections</code>). The combined delays used will inform the appropriate length
of this burn in but 7 days is likely a sensible starting point.</p></td>
    </tr>
    <tr>
      <th>stationary</th>
      <td><p>Logical, defaults to FALSE. Should Rt be estimated with a global mean. When estimating Rt
this should substantially improve run times but will revert to the global average for real time and forecasted estimates.
This setting is most appropriate when estimating historic Rt or when combined with breakpoints.</p></td>
    </tr>
    <tr>
      <th>fixed</th>
      <td><p>Logical, defaults to FALSE. If TRUE then a Gaussian process is not used and Rt is assumed to be constant over time
(apart from any manually included breakpoints). If <code>estimate_rt</code> is FALSE then this reduces the backcalculation to a simple mean shift.
This option can be used to produce a null model estimate, to produce a single Rt estimate for a short timeseries or as part of a wider
analysis on the impact of interventions.</p></td>
    </tr>
    <tr>
      <th>fixed_future_rt</th>
      <td><p>Logical, defaults to FALSE. IF TRUE then the estimated Rt from the last time point with data is used for all
future time points without data.</p></td>
    </tr>
    <tr>
      <th>future</th>
      <td><p>Logical, defaults to <code>FALSE</code>. Should stan chains be run in parallel using <code>future</code>. This allows users to have chains
fail gracefully (i.e when combined with <code>max_execution_time</code>). Should be combined with a call to <code><a href='https://rdrr.io/pkg/future/man/plan.html'>future::plan</a></code></p></td>
    </tr>
    <tr>
      <th>max_execution_time</th>
      <td><p>Numeric, defaults to Inf. If set will kill off processing of each chain if not finished within the specified timeout.
When more than 2 chains finish successfully estimates will still be returned. If less than 2 chains return within the allowed time then estimation
will fail with an informative error.</p></td>
    </tr>
    <tr>
      <th>prior_smoothing_window</th>
      <td><p>Numeric defaults to 7. The number of days over which to take a rolling average
for the prior based on reported cases.</p></td>
    </tr>
    <tr>
      <th>return_fit</th>
      <td><p>Logical, defaults to FALSE. Should the fitted stan model be returned.</p></td>
    </tr>
    <tr>
      <th>forecast_model</th>
      <td><p>An uninitialised forecast model function to be passed to <code><a href='https://rdrr.io/pkg/EpiSoon/man/forecast_rt.html'>EpiSoon::forecast_rt</a></code>. Used
for forecasting future Rt and case co An example of the required structure is: <code>function(ss, y){bsts::AddSemilocalLinearTrend(ss, y = y)}</code>.</p></td>
    </tr>
    <tr>
      <th>ensemble_type</th>
      <td><p>Character string indicating the type of ensemble to use. By default this is
an unweighted ensemble ("mean") with no other types currently supported.</p></td>
    </tr>
    <tr>
      <th>return_estimates</th>
      <td><p>Logical, defaults to TRUE. Should estimates be returned.</p></td>
    </tr>
    <tr>
      <th>keep_samples</th>
      <td><p>Logical, defaults to TRUE. Should samples be kept (either returned or saved or both
depending on other settings).</p></td>
    </tr>
    <tr>
      <th>make_plots</th>
      <td><p>Logical, defaults to TRUE. Should plots be made and returned (or saved).</p></td>
    </tr>
    <tr>
      <th>target_folder</th>
      <td><p>Character string specifying where to save results (will create if not present).</p></td>
    </tr>
    <tr>
      <th>target_date</th>
      <td><p>Date, defaults to maximum found in the data if not specified.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical, defaults to <code>FALSE</code>. Should verbose progress messages be printed.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of output from estimate_infections, forecast_infections,  report_cases, and report_summary.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='co'>## Construct example distributions</span>
<span class='va'>generation_time</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_generation_time.html'>get_generation_time</a></span><span class='op'>(</span>disease <span class='op'>=</span> <span class='st'>"SARS-CoV-2"</span>, source <span class='op'>=</span> <span class='st'>"ganyani"</span><span class='op'>)</span>
<span class='va'>incubation_period</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_incubation_period.html'>get_incubation_period</a></span><span class='op'>(</span>disease <span class='op'>=</span> <span class='st'>"SARS-CoV-2"</span>, source <span class='op'>=</span> <span class='st'>"lauer"</span><span class='op'>)</span>
<span class='va'>reporting_delay</span> <span class='op'>&lt;-</span> <span class='fu'>EpiNow2</span><span class='fu'>::</span><span class='fu'><a href='bootstrapped_dist_fit.html'>bootstrapped_dist_fit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Lognormal.html'>rlnorm</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='fl'>6</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span>, max_value <span class='op'>=</span> <span class='fl'>30</span><span class='op'>)</span>

<span class='co'>## Example case data</span>
<span class='va'>reported_cases</span> <span class='op'>&lt;-</span> <span class='fu'>EpiNow2</span><span class='fu'>::</span><span class='va'><a href='example_confirmed.html'>example_confirmed</a></span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span> 

<span class='co'>## Report Rt along with forecasts</span>
<span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>epinow</span><span class='op'>(</span>reported_cases <span class='op'>=</span> <span class='va'>reported_cases</span>, generation_time <span class='op'>=</span> <span class='va'>generation_time</span>,
              delays <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>incubation_period</span>, <span class='va'>reporting_delay</span><span class='op'>)</span>,
              stan_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>warmup <span class='op'>=</span> <span class='fl'>200</span>, cores <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='fl'>4</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>out</span>
</div><div class='output co'>#&gt; $estimates
#&gt; $estimates$samples
#&gt;                 variable        parameter time       date sample       value
#&gt;      1:       infections       infections    1 2020-02-09      1    2.104578
#&gt;      2:       infections       infections    2 2020-02-10      1    9.918045
#&gt;      3:       infections       infections    3 2020-02-11      1   20.148745
#&gt;      4:       infections       infections    4 2020-02-12      1   28.190642
#&gt;      5:       infections       infections    5 2020-02-13      1   49.058274
#&gt;     ---                                                                     
#&gt; 214056: prior_infections prior_infections   56 2020-04-04      1 4607.088011
#&gt; 214057: prior_infections prior_infections   57 2020-04-05      1 4562.019565
#&gt; 214058: prior_infections prior_infections   58 2020-04-06      1 4517.391996
#&gt; 214059: prior_infections prior_infections   59 2020-04-07      1 4473.200993
#&gt; 214060: prior_infections prior_infections   60 2020-04-08      1 4429.442284
#&gt;         strat     type
#&gt;      1:  &lt;NA&gt; estimate
#&gt;      2:  &lt;NA&gt; estimate
#&gt;      3:  &lt;NA&gt; estimate
#&gt;      4:  &lt;NA&gt; estimate
#&gt;      5:  &lt;NA&gt; estimate
#&gt;     ---               
#&gt; 214056:  &lt;NA&gt; forecast
#&gt; 214057:  &lt;NA&gt; forecast
#&gt; 214058:  &lt;NA&gt; forecast
#&gt; 214059:  &lt;NA&gt; forecast
#&gt; 214060:  &lt;NA&gt; forecast
#&gt; 
#&gt; $estimates$summarised
#&gt;            date       variable strat     type      bottom          top
#&gt;   1: 2020-02-22              R  &lt;NA&gt; estimate    1.190113     1.865546
#&gt;   2: 2020-02-23              R  &lt;NA&gt; estimate    1.331434     1.871549
#&gt;   3: 2020-02-24              R  &lt;NA&gt; estimate    1.399129     1.816464
#&gt;   4: 2020-02-25              R  &lt;NA&gt; estimate    1.464489     1.810915
#&gt;   5: 2020-02-26              R  &lt;NA&gt; estimate    1.531088     1.828472
#&gt;  ---                                                                  
#&gt; 270: 2020-04-04 reported_cases  &lt;NA&gt; forecast  825.000000  9279.000000
#&gt; 271: 2020-04-05 reported_cases  &lt;NA&gt; forecast 1077.000000 10940.000000
#&gt; 272: 2020-04-06 reported_cases  &lt;NA&gt; forecast  618.000000 10933.000000
#&gt; 273: 2020-04-07 reported_cases  &lt;NA&gt; forecast  579.000000 10074.000000
#&gt; 274: 2020-04-08 reported_cases  &lt;NA&gt; forecast  476.000000  9825.000000
#&gt;            lower       upper central_lower central_upper      median
#&gt;   1:    1.399773    1.656284      1.439637      1.531139    1.529394
#&gt;   2:    1.466085    1.674018      1.503920      1.580704    1.564417
#&gt;   3:    1.490796    1.656797      1.566606      1.624793    1.600622
#&gt;   4:    1.557524    1.687208      1.611329      1.657265    1.633066
#&gt;   5:    1.582655    1.700511      1.651673      1.694200    1.665935
#&gt;  ---                                                                
#&gt; 270: 1680.000000 4571.000000   3126.000000   4131.000000 4255.500000
#&gt; 271: 2020.000000 5418.000000   3666.000000   4809.000000 4761.000000
#&gt; 272: 2231.000000 5715.000000   2299.000000   3451.000000 4577.500000
#&gt; 273: 1332.000000 4231.000000   1866.000000   2940.000000 3898.000000
#&gt; 274: 1259.000000 3781.000000   1381.000000   2242.000000 3332.500000
#&gt;             mean           sd
#&gt;   1:    1.539955 2.069887e-01
#&gt;   2:    1.569134 1.671036e-01
#&gt;   3:    1.601308 1.324607e-01
#&gt;   4:    1.635035 1.056211e-01
#&gt;   5:    1.668641 8.992658e-02
#&gt;  ---                         
#&gt; 270: 5047.191000 3.357203e+03
#&gt; 271: 6003.977000 5.045123e+03
#&gt; 272: 5920.518000 5.028147e+03
#&gt; 273: 5537.903000 7.923904e+03
#&gt; 274: 5150.376000 7.604268e+03
#&gt; 
#&gt; 
#&gt; $estimated_reported_cases
#&gt; $estimated_reported_cases$samples
#&gt;              date sample cases  type
#&gt;     1: 2020-02-22      1    53 gp_rt
#&gt;     2: 2020-02-23      1   116 gp_rt
#&gt;     3: 2020-02-24      1    36 gp_rt
#&gt;     4: 2020-02-25      1   103 gp_rt
#&gt;     5: 2020-02-26      1   156 gp_rt
#&gt;    ---                              
#&gt; 46996: 2020-04-04   1000  2364 gp_rt
#&gt; 46997: 2020-04-05   1000  2248 gp_rt
#&gt; 46998: 2020-04-06   1000  3128 gp_rt
#&gt; 46999: 2020-04-07   1000  8209 gp_rt
#&gt; 47000: 2020-04-08   1000  3898 gp_rt
#&gt; 
#&gt; $estimated_reported_cases$summarised
#&gt;           date  type bottom   top lower upper central_lower central_upper
#&gt;  1: 2020-02-22 gp_rt     18   100    35    67            46            57
#&gt;  2: 2020-02-23 gp_rt     24   146    58   105            63            80
#&gt;  3: 2020-02-24 gp_rt     37   198    62   126            89           111
#&gt;  4: 2020-02-25 gp_rt     46   227    74   148           103           128
#&gt;  5: 2020-02-26 gp_rt     41   230    83   151           119           144
#&gt;  6: 2020-02-27 gp_rt     48   307    98   197           114           151
#&gt;  7: 2020-02-28 gp_rt     89   477   166   317           168           223
#&gt;  8: 2020-02-29 gp_rt     65   414   148   280           196           243
#&gt;  9: 2020-03-01 gp_rt    131   645   178   378           293           363
#&gt; 10: 2020-03-02 gp_rt    131   714   216   430           308           384
#&gt; 11: 2020-03-03 gp_rt    132   744   233   477           264           351
#&gt; 12: 2020-03-04 gp_rt    128   709   258   477           345           420
#&gt; 13: 2020-03-05 gp_rt    157  1027   346   681           392           513
#&gt; 14: 2020-03-06 gp_rt    278  1632   486  1002           675           860
#&gt; 15: 2020-03-07 gp_rt    264  1459   511   994           652           833
#&gt; 16: 2020-03-08 gp_rt    324  2031   701  1352           770           999
#&gt; 17: 2020-03-09 gp_rt    512  2378   825  1563           936          1173
#&gt; 18: 2020-03-10 gp_rt    536  2585   972  1741          1177          1443
#&gt; 19: 2020-03-11 gp_rt    535  2470   796  1609          1070          1367
#&gt; 20: 2020-03-12 gp_rt    613  3389  1225  2297          1155          1558
#&gt; 21: 2020-03-13 gp_rt   1071  5014  1471  3003          2156          2682
#&gt; 22: 2020-03-14 gp_rt    918  4513  1491  2837          1703          2177
#&gt; 23: 2020-03-15 gp_rt    973  5645  1937  3681          2491          3115
#&gt; 24: 2020-03-16 gp_rt   1151  6368  2063  4178          2374          3099
#&gt; 25: 2020-03-17 gp_rt   1077  6311  2071  4094          2610          3273
#&gt; 26: 2020-03-18 gp_rt   1365  6058  1882  3609          2563          3199
#&gt; 27: 2020-03-19 gp_rt   1286  7301  2406  4682          2794          3580
#&gt; 28: 2020-03-20 gp_rt   1880  9689  3691  6744          3828          4871
#&gt; 29: 2020-03-21 gp_rt   1581  8268  2909  5400          3197          4059
#&gt; 30: 2020-03-22 gp_rt   1709  9900  3481  6668          4086          5263
#&gt; 31: 2020-03-23 gp_rt   1846 10288  3139  6367          5129          6367
#&gt; 32: 2020-03-24 gp_rt   1511  8982  3188  6150          3167          4213
#&gt; 33: 2020-03-25 gp_rt   1618  7836  2717  5125          3494          4354
#&gt; 34: 2020-03-26 gp_rt   1601  9405  3103  5989          3959          4981
#&gt; 35: 2020-03-27 gp_rt   2274 11857  4283  8057          4283          5588
#&gt; 36: 2020-03-28 gp_rt   1795  9229  2708  5622          4380          5407
#&gt; 37: 2020-03-29 gp_rt   1805 10743  3512  6752          3973          5085
#&gt; 38: 2020-03-30 gp_rt   1607 10716  3254  6607          3923          5106
#&gt; 39: 2020-03-31 gp_rt   1717  9463  3093  5900          3638          4627
#&gt; 40: 2020-04-01 gp_rt   1233  8029  2356  4711          2583          3472
#&gt; 41: 2020-04-02 gp_rt   1080  8654  2525  5217          2765          3732
#&gt; 42: 2020-04-03 gp_rt   1284 11614  2695  6498          3179          4469
#&gt; 43: 2020-04-04 gp_rt    825  9279  1680  4571          3126          4131
#&gt; 44: 2020-04-05 gp_rt   1077 10940  2020  5418          3666          4809
#&gt; 45: 2020-04-06 gp_rt    618 10933  2231  5715          2299          3451
#&gt; 46: 2020-04-07 gp_rt    579 10074  1332  4231          1866          2940
#&gt; 47: 2020-04-08 gp_rt    476  9825  1259  3781          1381          2242
#&gt;           date  type bottom   top lower upper central_lower central_upper
#&gt;     median     mean         sd
#&gt;  1:   57.0   60.678   27.01218
#&gt;  2:   85.0   91.670   41.47760
#&gt;  3:  110.0  117.341   53.29979
#&gt;  4:  126.0  133.783   61.07899
#&gt;  5:  129.5  139.000   61.12140
#&gt;  6:  175.0  187.931   86.16558
#&gt;  7:  266.0  286.075  136.20108
#&gt;  8:  238.0  258.636  121.47415
#&gt;  9:  342.0  366.673  170.36690
#&gt; 10:  381.5  418.444  195.69751
#&gt; 11:  407.0  437.361  208.73650
#&gt; 12:  409.0  443.529  203.49790
#&gt; 13:  572.5  619.511  296.12467
#&gt; 14:  826.0  912.488  462.79971
#&gt; 15:  815.0  875.829  405.08167
#&gt; 16: 1129.0 1243.271  603.95272
#&gt; 17: 1256.5 1391.160  647.01949
#&gt; 18: 1386.0 1482.637  667.17832
#&gt; 19: 1405.0 1491.812  662.56437
#&gt; 20: 1879.0 2023.209  926.20736
#&gt; 21: 2673.0 2908.756 1325.18650
#&gt; 22: 2450.0 2656.060 1182.45070
#&gt; 23: 3126.5 3426.928 1567.43897
#&gt; 24: 3565.5 3836.884 1749.45888
#&gt; 25: 3551.5 3843.235 1748.11077
#&gt; 26: 3190.5 3450.562 1560.67069
#&gt; 27: 3966.5 4307.359 2080.74707
#&gt; 28: 5374.0 5894.875 2760.88948
#&gt; 29: 4449.0 4876.111 2295.83404
#&gt; 30: 5536.5 5938.661 2823.16618
#&gt; 31: 5646.0 6099.224 2929.93523
#&gt; 32: 5062.5 5472.011 2576.84186
#&gt; 33: 4369.5 4722.114 2087.23088
#&gt; 34: 5164.5 5633.350 2640.13851
#&gt; 35: 6378.0 7071.846 3409.32873
#&gt; 36: 5038.0 5392.096 2535.73015
#&gt; 37: 5671.0 6207.233 2934.55373
#&gt; 38: 5559.5 6184.075 3218.14037
#&gt; 39: 4873.0 5435.624 2607.27641
#&gt; 40: 4071.5 4543.282 2385.49224
#&gt; 41: 4505.5 5123.818 2956.89803
#&gt; 42: 5743.0 6598.400 4043.86820
#&gt; 43: 4255.5 5047.191 3357.20277
#&gt; 44: 4761.0 6003.977 5045.12278
#&gt; 45: 4577.5 5920.518 5028.14724
#&gt; 46: 3898.0 5537.903 7923.90362
#&gt; 47: 3332.5 5150.376 7604.26762
#&gt;     median     mean         sd
#&gt; 
#&gt; 
#&gt; $summary
#&gt;                                  measure              estimate
#&gt; 1: New confirmed cases by infection date    3746 (47 -- 12677)
#&gt; 2:        Expected change in daily cases                Unsure
#&gt; 3:            Effective reproduction no.      0.9 (0.3 -- 1.5)
#&gt; 4:                        Rate of growth -0.04 (-0.22 -- 0.12)
#&gt; 5:          Doubling/halving time (days)     -17 (5.6 -- -3.1)
#&gt;     numeric_estimate
#&gt; 1: &lt;data.table[1x7]&gt;
#&gt; 2:              0.66
#&gt; 3: &lt;data.table[1x7]&gt;
#&gt; 4: &lt;data.table[1x7]&gt;
#&gt; 5: &lt;data.table[1x3]&gt;
#&gt; 
#&gt; $plots
#&gt; $plots$infections</div><div class='img'><img src='epinow-1.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$reports</div><div class='img'><img src='epinow-2.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$reff</div><div class='img'><img src='epinow-3.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$growth_rate</div><div class='img'><img src='epinow-4.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$summary</div><div class='img'><img src='epinow-5.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; </div><div class='input'>
<span class='co'>## For optional forecasting</span>
<span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"EpiSoon"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
   <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"forecastHybrid"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>

   <span class='co'>## Report Rt along with forecasts</span>
   <span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>epinow</span><span class='op'>(</span>reported_cases <span class='op'>=</span> <span class='va'>cases</span>, samples <span class='op'>=</span> <span class='fl'>1000</span>, 
                 generation_time <span class='op'>=</span> <span class='va'>generation_time</span>,
                 delays <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>incubation_period</span>, <span class='va'>reporting_delay</span><span class='op'>)</span>,
                 forecast_model <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>...</span><span class='op'>)</span><span class='op'>{</span>
                   <span class='fu'>EpiSoon</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/EpiSoon/man/forecastHybrid_model.html'>forecastHybrid_model</a></span><span class='op'>(</span>
                     y <span class='op'>=</span> <span class='va'>y</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>21</span><span class='op'>)</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span><span class='op'>]</span>,
                     model_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>models <span class='op'>=</span> <span class='st'>"aefz"</span>, weights <span class='op'>=</span> <span class='st'>"equal"</span><span class='op'>)</span>,
                     forecast_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>PI.combination <span class='op'>=</span> <span class='st'>"mean"</span><span class='op'>)</span>, <span class='va'>...</span><span class='op'>)</span><span class='op'>}</span>,
                  stan_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>warmup <span class='op'>=</span> <span class='fl'>200</span>, cores <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='fl'>4</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>out</span>
   <span class='op'>}</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; <span class='message'>Loading required namespace: EpiSoon</span></div><div class='output co'>#&gt; <span class='message'>Loading required namespace: forecastHybrid</span></div><div class='output co'>#&gt; <span class='message'>Registered S3 method overwritten by 'quantmod':</span>
#&gt; <span class='message'>  method            from</span>
#&gt; <span class='message'>  as.zoo.data.frame zoo </span></div><div class='output co'>#&gt; <span class='error'>Error in data.table::setDT(reported_cases): object 'cases' not found</span></div><div class='input'>
<span class='co'># }</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sam Abbott, Joel Hellewell, Robin Thompson, Katelyn Gostic, Katharine Sherratt, Sophie Meakin, James Munday, Nikos Bosse, Joe Hickson, EpiForecasts, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


