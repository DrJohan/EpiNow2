<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Real-time Rt Estimation, Forecasting and Reporting — epinow • EpiNow2</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Real-time Rt Estimation, Forecasting and Reporting — epinow" />
<meta property="og:description" content="Estimate Rt and cases by date of infection, forecast into the future, transform to date
of report and then save summary measures and plots." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EpiNow2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/epiforecasts/EpiNow2">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Real-time Rt Estimation, Forecasting and Reporting</h1>
    
    <div class="hidden name"><code>epinow.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Estimate Rt and cases by date of infection, forecast into the future, transform to date
of report and then save summary measures and plots.</p>
    </div>

    <pre class="usage"><span class='fu'>epinow</span><span class='op'>(</span>
  <span class='va'>reported_cases</span>,
  <span class='va'>model</span>,
  samples <span class='op'>=</span> <span class='fl'>1000</span>,
  <span class='va'>stan_args</span>,
  method <span class='op'>=</span> <span class='st'>"exact"</span>,
  family <span class='op'>=</span> <span class='st'>"negbin"</span>,
  <span class='va'>generation_time</span>,
  <span class='va'>delays</span>,
  gp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>basis_prop <span class='op'>=</span> <span class='fl'>0.3</span>, boundary_scale <span class='op'>=</span> <span class='fl'>2</span>, lengthscale_mean <span class='op'>=</span> <span class='fl'>0</span>, lengthscale_sd
    <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>,
  rt_prior <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fl'>1</span>, sd <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,
  horizon <span class='op'>=</span> <span class='fl'>7</span>,
  estimate_rt <span class='op'>=</span> <span class='cn'>TRUE</span>,
  estimate_week_eff <span class='op'>=</span> <span class='cn'>TRUE</span>,
  estimate_breakpoints <span class='op'>=</span> <span class='cn'>FALSE</span>,
  burn_in <span class='op'>=</span> <span class='fl'>0</span>,
  stationary <span class='op'>=</span> <span class='cn'>FALSE</span>,
  fixed <span class='op'>=</span> <span class='cn'>FALSE</span>,
  fixed_future_rt <span class='op'>=</span> <span class='cn'>FALSE</span>,
  future <span class='op'>=</span> <span class='cn'>FALSE</span>,
  max_execution_time <span class='op'>=</span> <span class='cn'>Inf</span>,
  prior_smoothing_window <span class='op'>=</span> <span class='fl'>7</span>,
  return_fit <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>forecast_model</span>,
  ensemble_type <span class='op'>=</span> <span class='st'>"mean"</span>,
  return_estimates <span class='op'>=</span> <span class='cn'>TRUE</span>,
  keep_samples <span class='op'>=</span> <span class='cn'>TRUE</span>,
  make_plots <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>target_folder</span>,
  <span class='va'>target_date</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>reported_cases</th>
      <td><p>A data frame of confirmed cases (confirm) by date (date). confirm must be integer and date must be
in date format.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>A compiled stan model. By default uses the internal package model.</p></td>
    </tr>
    <tr>
      <th>samples</th>
      <td><p>Numeric, defaults to 1000. Number of samples post warmup.</p></td>
    </tr>
    <tr>
      <th>stan_args</th>
      <td><p>A list of stan arguments to be passed to <code><a href='https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html'>rstan::sampling</a></code> or <code><a href='https://mc-stan.org/rstan/reference/stanmodel-method-vb.html'>rstan::vb</a></code> (when using the "exact"
or "approximate" method). For <code>method = approximate</code> an additional argument <code>trials</code> indicates the number of attempts to make
using variational inference before returning an error (as stochastic failure is possible). The default for this is 5.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>A character string defaults to "exact". Also accepts "approximate". Indicates the fitting method to be used
this can either be "exact" (NUTs sampling) or "approximate" (variational inference). The exact approach returns samples
from the posterior whilst the approximate method returns approximate samples. The approximate method is likely to return results
several order of magnitudes faster than the exact method.</p></td>
    </tr>
    <tr>
      <th>family</th>
      <td><p>A character string indicating the reporting model to use. Defaults to negative
binomial ("negbin") with poisson ("poisson") also supported.</p></td>
    </tr>
    <tr>
      <th>generation_time</th>
      <td><p>A list containing the mean, standard deviation of the mean (mean_sd),
standard deviation (sd), standard deviation of the standard deviation and the maximum allowed value for the
generation time (assuming a gamma distribution).</p></td>
    </tr>
    <tr>
      <th>delays</th>
      <td><p>A list of delays (i.e incubation period/reporting delay) between infection and report.
Each list entry must also be a list containing the mean, standard deviation of the mean (mean_sd),
standard deviation (sd), standard deviation of the standard deviation and the maximum allowed value for the
that delay (assuming a lognormal distribution with all parameters excepting the max allowed value
on the log scale).</p></td>
    </tr>
    <tr>
      <th>gp</th>
      <td><p>List controlling the Gaussian process approximation. Must contain
the <code>basis_prop</code> (number of basis functions based on scaling the time points) which defaults to 0.3 and must be
between 0 and 1 (increasing this increases the accuracy of the approximation and the cost of additional compute.
Must also contain the <code>boundary_scale</code> (multiplied by half the range of the input time series). Increasing this
increases the accuracy of the approximation at the cost of additional compute.
See here: https://arxiv.org/abs/2004.11408 for more information on setting these parameters.
Can optionally also contain the  <code>lengthscale_mean</code> and <code>lengthscale_sd</code>. If these are specified this will override
the defaults of 0 and 2 (normal distributed truncated at zero).</p></td>
    </tr>
    <tr>
      <th>rt_prior</th>
      <td><p>A list contain the mean and standard deviation (sd) of the gamma distributed prior for
Rt. By default this is assumed to be mean 1 with a standard deviation of 1.</p></td>
    </tr>
    <tr>
      <th>horizon</th>
      <td><p>Numeric, defaults to 7. Number of days into the future to forecast.</p></td>
    </tr>
    <tr>
      <th>estimate_rt</th>
      <td><p>Logical, defaults TRUE. Should Rt be estimated when imputing infections.</p></td>
    </tr>
    <tr>
      <th>estimate_week_eff</th>
      <td><p>Logical, defaults TRUE. Should weekly reporting effects be estimated.</p></td>
    </tr>
    <tr>
      <th>estimate_breakpoints</th>
      <td><p>Logical, defaults to FALSE. Should breakpoints in Rt be estimated. If true then <code>reported_cases</code>
must contain a <code>breakpoint</code> variable that is 1 on the dates with breakpoints and otherwise 0. Breakpoints are fit jointly with
a global non-parametric effect and so represent a conservative estimate of breakpoint changes.</p></td>
    </tr>
    <tr>
      <th>burn_in</th>
      <td><p>Numeric, defaults to 0. The number of initial estimates to discard. This argument may be used to reduce
spurious findings when running <code>estimate_infections</code> on a partial timeseries (as the earliest estimates will not be informed by
all cases that occurred only those supplied to <code>estimate_infections</code>). The combined delays used will inform the appropriate length
of this burn in but 7 days is likely a sensible starting point.</p></td>
    </tr>
    <tr>
      <th>stationary</th>
      <td><p>Logical, defaults to FALSE. Should Rt be estimated with a global mean. When estimating Rt
this should substantially improve run times but will revert to the global average for real time and forecasted estimates.
This setting is most appropriate when estimating historic Rt or when combined with breakpoints.</p></td>
    </tr>
    <tr>
      <th>fixed</th>
      <td><p>Logical, defaults to FALSE. If TRUE then a Gaussian process is not used and Rt is assumed to be constant over time
(apart from any manually included breakpoints). If <code>estimate_rt</code> is FALSE then this reduces the backcalculation to a simple mean shift.
This option can be used to produce a null model estimate, to produce a single Rt estimate for a short timeseries or as part of a wider
analysis on the impact of interventions.</p></td>
    </tr>
    <tr>
      <th>fixed_future_rt</th>
      <td><p>Logical, defaults to FALSE. IF TRUE then the estimated Rt from the last time point with data is used for all
future time points without data.</p></td>
    </tr>
    <tr>
      <th>future</th>
      <td><p>Logical, defaults to <code>FALSE</code>. Should stan chains be run in parallel using <code>future</code>. This allows users to have chains
fail gracefully (i.e when combined with <code>max_execution_time</code>). Should be combined with a call to <code><a href='https://rdrr.io/pkg/future/man/plan.html'>future::plan</a></code></p></td>
    </tr>
    <tr>
      <th>max_execution_time</th>
      <td><p>Numeric, defaults to Inf. If set will kill off processing of each chain if not finished within the specified timeout.
When more than 2 chains finish successfully estimates will still be returned. If less than 2 chains return within the allowed time then estimation
will fail with an informative error.</p></td>
    </tr>
    <tr>
      <th>prior_smoothing_window</th>
      <td><p>Numeric defaults to 7. The number of days over which to take a rolling average
for the prior based on reported cases.</p></td>
    </tr>
    <tr>
      <th>return_fit</th>
      <td><p>Logical, defaults to FALSE. Should the fitted stan model be returned.</p></td>
    </tr>
    <tr>
      <th>forecast_model</th>
      <td><p>An uninitialised forecast model function to be passed to <code><a href='https://rdrr.io/pkg/EpiSoon/man/forecast_rt.html'>EpiSoon::forecast_rt</a></code>. Used
for forecasting future Rt and case co An example of the required structure is: <code>function(ss, y){bsts::AddSemilocalLinearTrend(ss, y = y)}</code>.</p></td>
    </tr>
    <tr>
      <th>ensemble_type</th>
      <td><p>Character string indicating the type of ensemble to use. By default this is
an unweighted ensemble ("mean") with no other types currently supported.</p></td>
    </tr>
    <tr>
      <th>return_estimates</th>
      <td><p>Logical, defaults to TRUE. Should estimates be returned.</p></td>
    </tr>
    <tr>
      <th>keep_samples</th>
      <td><p>Logical, defaults to TRUE. Should samples be kept (either returned or saved or both
depending on other settings).</p></td>
    </tr>
    <tr>
      <th>make_plots</th>
      <td><p>Logical, defaults to TRUE. Should plots be made and returned (or saved).</p></td>
    </tr>
    <tr>
      <th>target_folder</th>
      <td><p>Character string specifying where to save results (will create if not present).</p></td>
    </tr>
    <tr>
      <th>target_date</th>
      <td><p>Date, defaults to maximum found in the data if not specified.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical, defaults to <code>FALSE</code>. Should verbose progress messages be printed.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of output from estimate_infections, forecast_infections,  report_cases, and report_summary.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='co'>## Construct example distributions</span>
<span class='va'>generation_time</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_generation_time.html'>get_generation_time</a></span><span class='op'>(</span>disease <span class='op'>=</span> <span class='st'>"SARS-CoV-2"</span>, source <span class='op'>=</span> <span class='st'>"ganyani"</span><span class='op'>)</span>
<span class='va'>incubation_period</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_incubation_period.html'>get_incubation_period</a></span><span class='op'>(</span>disease <span class='op'>=</span> <span class='st'>"SARS-CoV-2"</span>, source <span class='op'>=</span> <span class='st'>"lauer"</span><span class='op'>)</span>
<span class='va'>reporting_delay</span> <span class='op'>&lt;-</span> <span class='fu'>EpiNow2</span><span class='fu'>::</span><span class='fu'><a href='bootstrapped_dist_fit.html'>bootstrapped_dist_fit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Lognormal.html'>rlnorm</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='fl'>6</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span>, max_value <span class='op'>=</span> <span class='fl'>30</span><span class='op'>)</span>

<span class='co'>## Example case data</span>
<span class='va'>reported_cases</span> <span class='op'>&lt;-</span> <span class='fu'>EpiNow2</span><span class='fu'>::</span><span class='va'><a href='example_confirmed.html'>example_confirmed</a></span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span> 

<span class='co'>## Report Rt along with forecasts</span>
<span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>epinow</span><span class='op'>(</span>reported_cases <span class='op'>=</span> <span class='va'>reported_cases</span>, generation_time <span class='op'>=</span> <span class='va'>generation_time</span>,
              delays <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>incubation_period</span>, <span class='va'>reporting_delay</span><span class='op'>)</span>,
              stan_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>warmup <span class='op'>=</span> <span class='fl'>200</span>, cores <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='fl'>4</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>out</span>
</div><div class='output co'>#&gt; $estimates
#&gt; $estimates$samples
#&gt;                 variable        parameter time       date sample       value
#&gt;      1:       infections       infections    1 2020-02-02      1    2.184491
#&gt;      2:       infections       infections    2 2020-02-03      1   12.166324
#&gt;      3:       infections       infections    3 2020-02-04      1   16.209229
#&gt;      4:       infections       infections    4 2020-02-05      1   31.933723
#&gt;      5:       infections       infections    5 2020-02-06      1   51.252836
#&gt;     ---                                                                     
#&gt; 221063: prior_infections prior_infections   63 2020-04-04      1 4300.717845
#&gt; 221064: prior_infections prior_infections   64 2020-04-05      1 4258.646439
#&gt; 221065: prior_infections prior_infections   65 2020-04-06      1 4216.986592
#&gt; 221066: prior_infections prior_infections   66 2020-04-07      1 4175.734279
#&gt; 221067: prior_infections prior_infections   67 2020-04-08      1 4134.885514
#&gt;         strat     type
#&gt;      1:  &lt;NA&gt; estimate
#&gt;      2:  &lt;NA&gt; estimate
#&gt;      3:  &lt;NA&gt; estimate
#&gt;      4:  &lt;NA&gt; estimate
#&gt;      5:  &lt;NA&gt; estimate
#&gt;     ---               
#&gt; 221063:  &lt;NA&gt; forecast
#&gt; 221064:  &lt;NA&gt; forecast
#&gt; 221065:  &lt;NA&gt; forecast
#&gt; 221066:  &lt;NA&gt; forecast
#&gt; 221067:  &lt;NA&gt; forecast
#&gt; 
#&gt; $estimates$summarised
#&gt;            date       variable strat     type      bottom          top
#&gt;   1: 2020-02-22              R  &lt;NA&gt; estimate   0.4847621     1.386017
#&gt;   2: 2020-02-23              R  &lt;NA&gt; estimate   0.5631506     1.371386
#&gt;   3: 2020-02-24              R  &lt;NA&gt; estimate   0.6585433     1.372131
#&gt;   4: 2020-02-25              R  &lt;NA&gt; estimate   0.7654880     1.380192
#&gt;   5: 2020-02-26              R  &lt;NA&gt; estimate   0.8671429     1.372850
#&gt;  ---                                                                  
#&gt; 284: 2020-04-04 reported_cases  &lt;NA&gt; forecast  14.0000000 17605.000000
#&gt; 285: 2020-04-05 reported_cases  &lt;NA&gt; forecast  23.0000000 19179.000000
#&gt; 286: 2020-04-06 reported_cases  &lt;NA&gt; forecast 107.0000000 22835.000000
#&gt; 287: 2020-04-07 reported_cases  &lt;NA&gt; forecast  36.0000000 24552.000000
#&gt; 288: 2020-04-08 reported_cases  &lt;NA&gt; forecast  98.0000000 22555.000000
#&gt;            lower       upper central_lower central_upper       median
#&gt;   1:   0.8415773    1.314386     1.1981555      1.347794    0.9481427
#&gt;   2:   0.8859623    1.311720     1.2103795      1.352995    0.9865724
#&gt;   3:   0.8088093    1.177530     1.2135263      1.341949    1.0221480
#&gt;   4:   0.9786802    1.285194     0.9804015      1.094230    1.0683568
#&gt;   5:   1.0330106    1.272892     1.0355720      1.124751    1.1260644
#&gt;  ---                                                                 
#&gt; 284: 657.0000000 5072.000000  1527.0000000   3001.000000 4589.5000000
#&gt; 285: 314.0000000 5750.000000  1044.0000000   2747.000000 5503.5000000
#&gt; 286: 438.0000000 5235.000000   392.0000000   1963.000000 4986.0000000
#&gt; 287: 198.0000000 4590.000000   481.0000000   1878.000000 4557.5000000
#&gt; 288: 116.0000000 4084.000000   435.0000000   1456.000000 4072.5000000
#&gt;              mean           sd
#&gt;   1: 9.487965e-01 2.985001e-01
#&gt;   2: 9.810610e-01 2.668827e-01
#&gt;   3: 1.021110e+00 2.331425e-01
#&gt;   4: 1.068898e+00 1.975280e-01
#&gt;   5: 1.124006e+00 1.617950e-01
#&gt;  ---                          
#&gt; 284: 8.066080e+03 1.255957e+04
#&gt; 285: 9.840658e+03 2.207546e+04
#&gt; 286: 1.225230e+04 4.418182e+04
#&gt; 287: 1.251697e+04 3.841759e+04
#&gt; 288: 1.705635e+04 1.363087e+05
#&gt; 
#&gt; 
#&gt; $estimated_reported_cases
#&gt; $estimated_reported_cases$samples
#&gt;              date sample cases  type
#&gt;     1: 2020-02-22      1   162 gp_rt
#&gt;     2: 2020-02-23      1   746 gp_rt
#&gt;     3: 2020-02-24      1   504 gp_rt
#&gt;     4: 2020-02-25      1    91 gp_rt
#&gt;     5: 2020-02-26      1   111 gp_rt
#&gt;    ---                              
#&gt; 46996: 2020-04-04   1000  2104 gp_rt
#&gt; 46997: 2020-04-05   1000 13716 gp_rt
#&gt; 46998: 2020-04-06   1000  5172 gp_rt
#&gt; 46999: 2020-04-07   1000  2522 gp_rt
#&gt; 47000: 2020-04-08   1000  1303 gp_rt
#&gt; 
#&gt; $estimated_reported_cases$summarised
#&gt;           date  type bottom   top lower upper central_lower central_upper
#&gt;  1: 2020-02-22 gp_rt      7   561    35   240            86           153
#&gt;  2: 2020-02-23 gp_rt      5   851    39   320           110           213
#&gt;  3: 2020-02-24 gp_rt      7   958    42   335            89           193
#&gt;  4: 2020-02-25 gp_rt      2  1005    60   387           163           282
#&gt;  5: 2020-02-26 gp_rt      3   939    24   347           220           335
#&gt;  6: 2020-02-27 gp_rt     10  1331    61   506           148           298
#&gt;  7: 2020-02-28 gp_rt      8  1770    87   712           224           427
#&gt;  8: 2020-02-29 gp_rt     15  1218    93   515           107           246
#&gt;  9: 2020-03-01 gp_rt     23  1682   125   658           338           533
#&gt; 10: 2020-03-02 gp_rt      7  1632    44   590           182           370
#&gt; 11: 2020-03-03 gp_rt     31  1684   122   632           174           354
#&gt; 12: 2020-03-04 gp_rt     15  1491    87   552           113           272
#&gt; 13: 2020-03-05 gp_rt     16  2194   141   821           211           451
#&gt; 14: 2020-03-06 gp_rt     38  3077   111   995           135           445
#&gt; 15: 2020-03-07 gp_rt     33  2457    33   749           347           594
#&gt; 16: 2020-03-08 gp_rt      7  2963    63  1006           413           757
#&gt; 17: 2020-03-09 gp_rt     57  3313   153  1168           441           777
#&gt; 18: 2020-03-10 gp_rt     14  3451   287  1378           289           671
#&gt; 19: 2020-03-11 gp_rt     16  3232   143  1234           517           912
#&gt; 20: 2020-03-12 gp_rt     17  4866   354  1813           500          1015
#&gt; 21: 2020-03-13 gp_rt      6  7364   366  2681           960          1784
#&gt; 22: 2020-03-14 gp_rt     12  5322   155  2023           653          1254
#&gt; 23: 2020-03-15 gp_rt    100  7760   554  3218           683          1582
#&gt; 24: 2020-03-16 gp_rt     19  7743   340  2941           898          1836
#&gt; 25: 2020-03-17 gp_rt     16  8297   312  2971           318          1276
#&gt; 26: 2020-03-18 gp_rt     46  7485   519  2843          1810          2684
#&gt; 27: 2020-03-19 gp_rt     16 10344   573  3743          2185          3374
#&gt; 28: 2020-03-20 gp_rt    108 15216   907  5688          1267          2873
#&gt; 29: 2020-03-21 gp_rt     21 10411   850  4310           967          2247
#&gt; 30: 2020-03-22 gp_rt      2 13220   498  4870          2218          3781
#&gt; 31: 2020-03-23 gp_rt     83 12555   592  4820          1088          2573
#&gt; 32: 2020-03-24 gp_rt     33 13414   587  4896          1202          2707
#&gt; 33: 2020-03-25 gp_rt     47 10378   333  3958          1061          2212
#&gt; 34: 2020-03-26 gp_rt    107 14686   664  5155          1521          3254
#&gt; 35: 2020-03-27 gp_rt    258 19166   565  6426          1816          3873
#&gt; 36: 2020-03-28 gp_rt     24 12851   947  4961          1747          3133
#&gt; 37: 2020-03-29 gp_rt      9 17373   780  6137          1467          3432
#&gt; 38: 2020-03-30 gp_rt     61 15191   902  5565          1992          3640
#&gt; 39: 2020-03-31 gp_rt     87 16331   484  5071          1693          3189
#&gt; 40: 2020-04-01 gp_rt     37 12736   500  4192          1706          2975
#&gt; 41: 2020-04-02 gp_rt    132 18492   294  5397          1264          2839
#&gt; 42: 2020-04-03 gp_rt     53 25805   866  7120          2210          4191
#&gt; 43: 2020-04-04 gp_rt     14 17605   657  5072          1527          3001
#&gt; 44: 2020-04-05 gp_rt     23 19179   314  5750          1044          2747
#&gt; 45: 2020-04-06 gp_rt    107 22835   438  5235           392          1963
#&gt; 46: 2020-04-07 gp_rt     36 24552   198  4590           481          1878
#&gt; 47: 2020-04-08 gp_rt     98 22555   116  4084           435          1456
#&gt;           date  type bottom   top lower upper central_lower central_upper
#&gt;     median      mean          sd
#&gt;  1:  219.0   278.503    239.9986
#&gt;  2:  295.5   408.398    365.9803
#&gt;  3:  321.5   444.674    421.0201
#&gt;  4:  350.5   478.724    441.1328
#&gt;  5:  333.0   449.372    394.6394
#&gt;  6:  473.0   639.482    665.8868
#&gt;  7:  659.5   884.349    849.8232
#&gt;  8:  438.0   590.635    541.0622
#&gt;  9:  574.5   791.742    721.6026
#&gt; 10:  568.5   767.807    709.8600
#&gt; 11:  566.5   785.204    732.9899
#&gt; 12:  503.5   683.414    652.2580
#&gt; 13:  735.5  1004.963    962.6425
#&gt; 14:  944.5  1407.644   1475.8978
#&gt; 15:  746.0  1081.120   1042.7865
#&gt; 16:  975.0  1378.274   1266.5537
#&gt; 17: 1104.0  1509.041   1373.2758
#&gt; 18: 1213.5  1635.742   1532.1181
#&gt; 19: 1147.5  1511.617   1334.2145
#&gt; 20: 1611.0  2271.463   2106.2333
#&gt; 21: 2456.5  3472.479   3615.0495
#&gt; 22: 1945.0  2654.911   2553.4683
#&gt; 23: 2824.0  3718.313   3418.8143
#&gt; 24: 2751.0  3655.784   3386.7828
#&gt; 25: 2766.0  3918.115   4068.6369
#&gt; 26: 2506.5  3526.725   3335.9280
#&gt; 27: 3439.5  4872.988   4939.8158
#&gt; 28: 5109.5  7243.833   7508.6326
#&gt; 29: 3899.5  5032.166   4391.0762
#&gt; 30: 4737.5  6507.385   6537.2136
#&gt; 31: 4488.5  6043.226   5654.8649
#&gt; 32: 4640.5  6528.273   7401.0363
#&gt; 33: 3822.0  4935.937   4454.8930
#&gt; 34: 4963.5  7069.206   7695.9431
#&gt; 35: 6253.0  9139.999   9530.3618
#&gt; 36: 4451.0  6221.994   5854.8755
#&gt; 37: 5691.5  7992.403   7774.8312
#&gt; 38: 5116.0  7147.870   7096.1376
#&gt; 39: 4726.5  7408.351   9356.2669
#&gt; 40: 3974.5  5889.861   6132.1028
#&gt; 41: 5316.5  8223.692   9680.4431
#&gt; 42: 6516.5 11272.607  15019.3116
#&gt; 43: 4589.5  8066.080  12559.5662
#&gt; 44: 5503.5  9840.658  22075.4552
#&gt; 45: 4986.0 12252.304  44181.8213
#&gt; 46: 4557.5 12516.970  38417.5932
#&gt; 47: 4072.5 17056.352 136308.6849
#&gt;     median      mean          sd
#&gt; 
#&gt; 
#&gt; $summary
#&gt;                                  measure            estimate  numeric_estimate
#&gt; 1: New confirmed cases by infection date   7270 (2 -- 32871) &lt;data.table[1x7]&gt;
#&gt; 2:        Expected change in daily cases              Unsure              0.49
#&gt; 3:            Effective reproduction no.        1 (0 -- 1.6) &lt;data.table[1x7]&gt;
#&gt; 4:                        Rate of growth   0 (-0.32 -- 0.17) &lt;data.table[1x7]&gt;
#&gt; 5:          Doubling/halving time (days) 145.4 (4.2 -- -2.2) &lt;data.table[1x3]&gt;
#&gt; 
#&gt; $plots
#&gt; $plots$infections</div><div class='img'><img src='epinow-1.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$reports</div><div class='img'><img src='epinow-2.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$reff</div><div class='img'><img src='epinow-3.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$growth_rate</div><div class='img'><img src='epinow-4.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$summary</div><div class='img'><img src='epinow-5.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; </div><div class='input'>
<span class='co'>## For optional forecasting</span>
<span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"EpiSoon"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
   <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"forecastHybrid"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>

   <span class='co'>## Report Rt along with forecasts</span>
   <span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>epinow</span><span class='op'>(</span>reported_cases <span class='op'>=</span> <span class='va'>cases</span>, samples <span class='op'>=</span> <span class='fl'>1000</span>, 
                 generation_time <span class='op'>=</span> <span class='va'>generation_time</span>,
                 delays <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>incubation_period</span>, <span class='va'>reporting_delay</span><span class='op'>)</span>,
                 forecast_model <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>...</span><span class='op'>)</span><span class='op'>{</span>
                   <span class='fu'>EpiSoon</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/EpiSoon/man/forecastHybrid_model.html'>forecastHybrid_model</a></span><span class='op'>(</span>
                     y <span class='op'>=</span> <span class='va'>y</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>21</span><span class='op'>)</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span><span class='op'>]</span>,
                     model_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>models <span class='op'>=</span> <span class='st'>"aefz"</span>, weights <span class='op'>=</span> <span class='st'>"equal"</span><span class='op'>)</span>,
                     forecast_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>PI.combination <span class='op'>=</span> <span class='st'>"mean"</span><span class='op'>)</span>, <span class='va'>...</span><span class='op'>)</span><span class='op'>}</span>,
                  stan_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>warmup <span class='op'>=</span> <span class='fl'>200</span>, cores <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='fl'>4</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>out</span>
   <span class='op'>}</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; <span class='message'>Loading required namespace: EpiSoon</span></div><div class='output co'>#&gt; <span class='message'>Loading required namespace: forecastHybrid</span></div><div class='output co'>#&gt; <span class='message'>Registered S3 method overwritten by 'quantmod':</span>
#&gt; <span class='message'>  method            from</span>
#&gt; <span class='message'>  as.zoo.data.frame zoo </span></div><div class='output co'>#&gt; <span class='error'>Error in data.table::setDT(reported_cases): object 'cases' not found</span></div><div class='input'>
<span class='co'># }</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sam Abbott, Joel Hellewell, Robin Thompson, Katelyn Gostic, Katharine Sherratt, Sophie Meakin, James Munday, Nikos Bosse, Joe Hickson, EpiForecasts, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


