<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Real-time Rt Estimation, Forecasting and Reporting — epinow • EpiNow2</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Real-time Rt Estimation, Forecasting and Reporting — epinow" />
<meta property="og:description" content="This function wraps the functionality of estimate_infections and forecast_infections in order
to estimate Rt and cases by date of infection, forecast into these infections into the future. It also contains
additional functionality to convert forecasts to date of report and produce summary output useful for reporting
results and interpreting them." />
<meta property="og:image" content="epiforecasts.io/EpiNow2/reference/figures/unnamed-chunk-13-1.png" />
<meta property="og:image:alt" content="Example estimates produced by EpiNow2 of the reproduction number, cases by date of infection and cases by date of report" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@seabbs" />
<meta name="twitter:site" content="@cmmid_lshtm" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EpiNow2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/epiforecasts/EpiNow2">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Real-time Rt Estimation, Forecasting and Reporting</h1>
    
    <div class="hidden name"><code>epinow.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function wraps the functionality of <code>estimate_infections</code> and <code>forecast_infections</code> in order
to estimate Rt and cases by date of infection, forecast into these infections into the future. It also contains
additional functionality to convert forecasts to date of report and produce summary output useful for reporting
results and interpreting them.</p>
    </div>

    <pre class="usage"><span class='fu'>epinow</span><span class='op'>(</span>
  <span class='va'>reported_cases</span>,
  samples <span class='op'>=</span> <span class='fl'>1000</span>,
  horizon <span class='op'>=</span> <span class='fl'>7</span>,
  <span class='va'>generation_time</span>,
  delays <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  CrIs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='fl'>0.5</span>, <span class='fl'>0.9</span><span class='op'>)</span>,
  return_output <span class='op'>=</span> <span class='cn'>FALSE</span>,
  output <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"samples"</span>, <span class='st'>"plots"</span>, <span class='st'>"latest"</span><span class='op'>)</span>,
  target_folder <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>target_date</span>,
  forecast_args <span class='op'>=</span> <span class='cn'>NULL</span>,
  logs <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>,
  id <span class='op'>=</span> <span class='st'>"epinow"</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>reported_cases</th>
      <td><p>A data frame of confirmed cases (confirm) by date (date). confirm must be integer and date must be
in date format.</p></td>
    </tr>
    <tr>
      <th>samples</th>
      <td><p>Numeric, defaults to 1000. Number of samples post warmup.</p></td>
    </tr>
    <tr>
      <th>horizon</th>
      <td><p>Numeric, defaults to 7. Number of days into the future to forecast.</p></td>
    </tr>
    <tr>
      <th>generation_time</th>
      <td><p>A list containing the mean, standard deviation of the mean (mean_sd),
standard deviation (sd), standard deviation of the standard deviation and the maximum allowed value for the
generation time (assuming a gamma distribution).</p></td>
    </tr>
    <tr>
      <th>delays</th>
      <td><p>A list of delays (i.e incubation period/reporting delay) between infection and report.
Each list entry must also be a list containing the mean, standard deviation of the mean (mean_sd),
standard deviation (sd), standard deviation of the standard deviation and the maximum allowed value for the
that delay (assuming a lognormal distribution with all parameters excepting the max allowed value
on the log scale). To use no delays set this to <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code>.</p></td>
    </tr>
    <tr>
      <th>CrIs</th>
      <td><p>Numeric vector of credible intervals to calculate.</p></td>
    </tr>
    <tr>
      <th>return_output</th>
      <td><p>Logical, defaults to FALSE. Should output be returned, this automatically updates to TRUE
if no directory for saving is specified.</p></td>
    </tr>
    <tr>
      <th>output</th>
      <td><p>A character vector of optional output to return. Supported options are samples ("samples"),
plots ("plots"), the run time ("timing"), copying the dated folder into a latest folder (if <code>target_folder</code> is not null</p><ul>
<li><p>set using "latest"), and the stan fit ("fit"). The default is to return samples and plots alongside summarised estimates
and summary statistics. This argument uses partial matching so for example passing "sam" will lead to samples
being reported.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>target_folder</th>
      <td><p>Character string specifying where to save results (will create if not present).</p></td>
    </tr>
    <tr>
      <th>target_date</th>
      <td><p>Date, defaults to maximum found in the data if not specified.</p></td>
    </tr>
    <tr>
      <th>forecast_args</th>
      <td><p>A list of arguments to pass to <code>forecast_infections</code>. Unless at a minimum a <code>forecast_model</code> is passed
tin his list then <code>forecast_infections</code> will be bypassed.</p></td>
    </tr>
    <tr>
      <th>logs</th>
      <td><p>Character path indicating the target folder in which to store log
information. Defaults to the temporary directory if not specified. Default logging
can be disabled if <code>logs</code> is set to NULL. If specifying a custom logging setup then
the code for <code>setup_default_logging</code> and the <code>setup_logging</code> function are a sensible
place to start.</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>A character string used to assign logging information on error. Used by <code>regional_epinow</code>
to assign <code>epinow</code> errors to regions.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical, defaults to <code>FALSE</code>. Should verbose debug progress messages be printed. Corresponds to the "DEBUG" level from
<code>futile.logger</code>. See <code>setup_logging</code> for more detailed logging options.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to <code>estimate_infections</code>. See that functions documentation for options.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of output from estimate_infections, forecast_infections,  report_cases, and report_summary.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='co'># construct example distributions</span>
<span class='va'>generation_time</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_generation_time.html'>get_generation_time</a></span><span class='op'>(</span>disease <span class='op'>=</span> <span class='st'>"SARS-CoV-2"</span>, source <span class='op'>=</span> <span class='st'>"ganyani"</span><span class='op'>)</span>
<span class='va'>incubation_period</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_incubation_period.html'>get_incubation_period</a></span><span class='op'>(</span>disease <span class='op'>=</span> <span class='st'>"SARS-CoV-2"</span>, source <span class='op'>=</span> <span class='st'>"lauer"</span><span class='op'>)</span>
<span class='va'>reporting_delay</span> <span class='op'>&lt;-</span> <span class='fu'><a href='bootstrapped_dist_fit.html'>bootstrapped_dist_fit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Lognormal.html'>rlnorm</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='fl'>6</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span>, max_value <span class='op'>=</span> <span class='fl'>30</span><span class='op'>)</span>

<span class='co'># example case data</span>
<span class='va'>reported_cases</span> <span class='op'>&lt;-</span> <span class='fu'>EpiNow2</span><span class='fu'>::</span><span class='va'><a href='example_confirmed.html'>example_confirmed</a></span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span><span class='op'>]</span> 

<span class='co'># estimate Rt and nowcast/forecast cases by date of infection</span>
<span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>epinow</span><span class='op'>(</span>reported_cases <span class='op'>=</span> <span class='va'>reported_cases</span>, generation_time <span class='op'>=</span> <span class='va'>generation_time</span>,
              delays <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>incubation_period</span>, <span class='va'>reporting_delay</span><span class='op'>)</span>,
              stan_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>cores <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='fl'>4</span>, <span class='fl'>1</span><span class='op'>)</span>,
              control <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>adapt_delta <span class='op'>=</span> <span class='fl'>0.95</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Logging threshold set at INFO for the EpiNow2 logger</span></div><div class='output co'>#&gt; <span class='message'>Writing EpiNow2 logs to: /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpDy5hT0/regional-epinow/2020-04-01.log</span></div><div class='output co'>#&gt; <span class='message'>Logging threshold set at INFO for the EpiNow2.epinow logger</span></div><div class='output co'>#&gt; <span class='message'>Writing EpiNow2.epinow logs to: /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpDy5hT0/epinow/2020-04-01.log</span></div><div class='output co'>#&gt; <span class='message'>Logging threshold set at INFO for the EpiNow2.epinow.estimate_infections logger</span></div><div class='output co'>#&gt; <span class='message'>Writing EpiNow2.epinow.estimate_infections logs to: /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpDy5hT0/epinow-estimate-infections/2020-04-01.log</span></div><div class='output co'>#&gt; WARN [2020-10-17 10:37:31] epinow: There were 7 divergent transitions after warmup. See
#&gt; http://mc-stan.org/misc/warnings.html#divergent-transitions-after-warmup
#&gt; to find out why this is a problem and how to eliminate them. - 
#&gt; WARN [2020-10-17 10:37:31] epinow: Examine the pairs() plot to diagnose sampling problems
#&gt;  - 
#&gt; WARN [2020-10-17 10:37:32] epinow: Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
#&gt; Running the chains for more iterations may help. See
#&gt; http://mc-stan.org/misc/warnings.html#bulk-ess - </div><div class='input'><span class='va'>out</span>
</div><div class='output co'>#&gt; $estimates
#&gt; $estimates$samples
#&gt;                 variable        parameter time       date sample       value
#&gt;      1:       infections       infections    1 2020-02-08      1    1.794003
#&gt;      2:       infections       infections    2 2020-02-09      1   11.204458
#&gt;      3:       infections       infections    3 2020-02-10      1   19.202360
#&gt;      4:       infections       infections    4 2020-02-11      1   30.229102
#&gt;      5:       infections       infections    5 2020-02-12      1   46.030403
#&gt;     ---                                                                     
#&gt; 215057: prior_infections prior_infections   57 2020-04-04      1 4562.019565
#&gt; 215058: prior_infections prior_infections   58 2020-04-05      1 4517.391996
#&gt; 215059: prior_infections prior_infections   59 2020-04-06      1 4473.200993
#&gt; 215060: prior_infections prior_infections   60 2020-04-07      1 4429.442284
#&gt; 215061: prior_infections prior_infections   61 2020-04-08      1 4386.111642
#&gt;         strat     type
#&gt;      1:  &lt;NA&gt; estimate
#&gt;      2:  &lt;NA&gt; estimate
#&gt;      3:  &lt;NA&gt; estimate
#&gt;      4:  &lt;NA&gt; estimate
#&gt;      5:  &lt;NA&gt; estimate
#&gt;     ---               
#&gt; 215057:  &lt;NA&gt; forecast
#&gt; 215058:  &lt;NA&gt; forecast
#&gt; 215059:  &lt;NA&gt; forecast
#&gt; 215060:  &lt;NA&gt; forecast
#&gt; 215061:  &lt;NA&gt; forecast
#&gt; 
#&gt; $estimates$summarised
#&gt;            date       variable strat     type      median         mean
#&gt;   1: 2020-02-22              R  &lt;NA&gt; estimate    1.357377     1.355167
#&gt;   2: 2020-02-23              R  &lt;NA&gt; estimate    1.409588     1.403691
#&gt;   3: 2020-02-24              R  &lt;NA&gt; estimate    1.455522     1.456035
#&gt;   4: 2020-02-25              R  &lt;NA&gt; estimate    1.511693     1.510619
#&gt;   5: 2020-02-26              R  &lt;NA&gt; estimate    1.568180     1.565509
#&gt;  ---                                                                  
#&gt; 272: 2020-04-04 reported_cases  &lt;NA&gt; forecast 3798.000000  4765.425000
#&gt; 273: 2020-04-05 reported_cases  &lt;NA&gt; forecast 4354.000000  5835.285000
#&gt; 274: 2020-04-06 reported_cases  &lt;NA&gt; forecast 4117.000000  5799.364000
#&gt; 275: 2020-04-07 reported_cases  &lt;NA&gt; forecast 3570.500000  7228.778000
#&gt; 276: 2020-04-08 reported_cases  &lt;NA&gt; forecast 2810.000000 11207.838000
#&gt;                sd     lower_90    lower_50    lower_20    upper_20    upper_50
#&gt;   1: 2.163936e-01    0.9962241    1.209787    1.307419    1.413115    1.500375
#&gt;   2: 1.783797e-01    1.1149674    1.280577    1.363078    1.452396    1.525855
#&gt;   3: 1.428894e-01    1.2207196    1.358450    1.422933    1.494407    1.554461
#&gt;   4: 1.128768e-01    1.3232343    1.433892    1.485948    1.543672    1.588387
#&gt;   5: 9.334108e-02    1.4129911    1.498916    1.543420    1.588125    1.625669
#&gt;  ---                                                                          
#&gt; 272: 3.865247e+03 1260.8000000 2527.750000 3258.600000 4436.400000 5739.500000
#&gt; 273: 5.374745e+03 1506.8000000 2724.250000 3688.400000 5201.000000 7039.750000
#&gt; 274: 6.893495e+03 1318.9000000 2614.500000 3475.400000 4805.000000 6542.250000
#&gt; 275: 4.582783e+04 1107.0000000 2219.000000 2959.200000 4327.600000 6119.750000
#&gt; 276: 1.344258e+05  834.7500000 1677.000000 2305.600000 3385.400000 4845.500000
#&gt;          upper_90
#&gt;   1:     1.712968
#&gt;   2:     1.688478
#&gt;   3:     1.681880
#&gt;   4:     1.694953
#&gt;   5:     1.716590
#&gt;  ---             
#&gt; 272: 11436.550000
#&gt; 273: 15002.250000
#&gt; 274: 15550.600000
#&gt; 275: 14761.150000
#&gt; 276: 13181.100000
#&gt; 
#&gt; 
#&gt; $estimated_reported_cases
#&gt; $estimated_reported_cases$samples
#&gt;              date sample cases  type
#&gt;     1: 2020-02-22      1    86 gp_rt
#&gt;     2: 2020-02-23      1    79 gp_rt
#&gt;     3: 2020-02-24      1   323 gp_rt
#&gt;     4: 2020-02-25      1   252 gp_rt
#&gt;     5: 2020-02-26      1    87 gp_rt
#&gt;    ---                              
#&gt; 46996: 2020-04-04   1000  1903 gp_rt
#&gt; 46997: 2020-04-05   1000  7508 gp_rt
#&gt; 46998: 2020-04-06   1000  9653 gp_rt
#&gt; 46999: 2020-04-07   1000  7564 gp_rt
#&gt; 47000: 2020-04-08   1000 22770 gp_rt
#&gt; 
#&gt; $estimated_reported_cases$summarised
#&gt;           date  type median      mean           sd lower_90 lower_50 lower_20
#&gt;  1: 2020-02-22 gp_rt   69.0    76.178     37.93779    28.00    49.00     61.0
#&gt;  2: 2020-02-23 gp_rt  109.0   121.433     59.60242    45.00    80.00     98.0
#&gt;  3: 2020-02-24 gp_rt  130.0   145.223     75.96311    53.00    92.00    113.6
#&gt;  4: 2020-02-25 gp_rt  146.0   161.039     83.79399    56.00   101.00    128.0
#&gt;  5: 2020-02-26 gp_rt  147.0   165.198     87.04054    53.00   103.00    131.6
#&gt;  6: 2020-02-27 gp_rt  197.0   218.524    112.68565    74.00   137.75    177.6
#&gt;  7: 2020-02-28 gp_rt  296.0   326.180    171.33609   115.95   209.00    262.0
#&gt;  8: 2020-02-29 gp_rt  252.5   283.518    146.17690   102.00   179.00    219.0
#&gt;  9: 2020-03-01 gp_rt  350.0   385.117    204.13877   134.95   244.00    309.0
#&gt; 10: 2020-03-02 gp_rt  384.5   436.962    229.03172   159.90   280.00    342.6
#&gt; 11: 2020-03-03 gp_rt  406.0   453.568    239.53944   154.00   275.00    352.0
#&gt; 12: 2020-03-04 gp_rt  409.5   445.767    233.39304   146.85   284.75    350.0
#&gt; 13: 2020-03-05 gp_rt  568.0   628.118    321.79329   216.95   398.75    493.6
#&gt; 14: 2020-03-06 gp_rt  836.5   929.862    511.54030   307.85   578.00    734.0
#&gt; 15: 2020-03-07 gp_rt  779.5   867.188    455.87798   300.85   560.50    690.6
#&gt; 16: 2020-03-08 gp_rt 1085.0  1212.504    650.28994   410.00   786.25    952.0
#&gt; 17: 2020-03-09 gp_rt 1224.5  1382.769    713.66516   505.95   900.00   1100.2
#&gt; 18: 2020-03-10 gp_rt 1323.0  1476.714    793.68461   480.85   946.00   1169.8
#&gt; 19: 2020-03-11 gp_rt 1273.5  1422.790    734.76219   491.00   908.75   1151.2
#&gt; 20: 2020-03-12 gp_rt 1791.5  2004.040   1098.04288   685.95  1260.25   1562.2
#&gt; 21: 2020-03-13 gp_rt 2685.0  3026.344   1598.43415  1069.05  1929.00   2362.2
#&gt; 22: 2020-03-14 gp_rt 2400.0  2604.904   1299.53282   914.95  1671.75   2107.8
#&gt; 23: 2020-03-15 gp_rt 3265.0  3532.043   1780.21394  1274.40  2285.00   2844.6
#&gt; 24: 2020-03-16 gp_rt 3448.0  3787.308   1952.18782  1377.90  2401.50   3012.6
#&gt; 25: 2020-03-17 gp_rt 3484.0  3930.162   2106.41405  1425.95  2444.75   3024.2
#&gt; 26: 2020-03-18 gp_rt 3212.5  3592.846   1922.94244  1347.60  2195.00   2821.0
#&gt; 27: 2020-03-19 gp_rt 4148.5  4658.160   2519.79744  1669.15  2879.75   3635.4
#&gt; 28: 2020-03-20 gp_rt 5520.5  6165.724   3206.66538  2200.85  3935.50   4936.6
#&gt; 29: 2020-03-21 gp_rt 4457.5  4907.015   2400.33349  1860.85  3218.75   3941.6
#&gt; 30: 2020-03-22 gp_rt 5542.5  6126.525   3226.40981  2047.80  3900.00   4919.0
#&gt; 31: 2020-03-23 gp_rt 5520.5  6062.717   3165.75256  2254.70  3938.50   4896.8
#&gt; 32: 2020-03-24 gp_rt 4977.0  5584.030   2852.00100  2090.45  3461.75   4344.6
#&gt; 33: 2020-03-25 gp_rt 4275.0  4833.121   2566.13087  1806.70  3118.25   3784.0
#&gt; 34: 2020-03-26 gp_rt 5305.5  5894.586   3032.13204  2050.85  3677.50   4709.8
#&gt; 35: 2020-03-27 gp_rt 6375.0  7133.133   3755.46240  2494.75  4598.50   5619.8
#&gt; 36: 2020-03-28 gp_rt 4944.0  5519.927   3035.02213  1947.65  3454.75   4313.0
#&gt; 37: 2020-03-29 gp_rt 5584.0  6183.774   3121.10517  2340.60  3972.00   4902.6
#&gt; 38: 2020-03-30 gp_rt 5412.5  5987.455   3306.87517  1954.80  3765.00   4758.8
#&gt; 39: 2020-03-31 gp_rt 4646.5  5290.672   2905.64443  1842.80  3181.75   4100.6
#&gt; 40: 2020-04-01 gp_rt 3761.0  4291.192   2392.62111  1430.60  2629.00   3279.0
#&gt; 41: 2020-04-02 gp_rt 4272.5  4914.443   2937.76139  1527.00  2833.25   3659.6
#&gt; 42: 2020-04-03 gp_rt 5091.5  6325.874   4592.73968  1888.00  3336.75   4316.4
#&gt; 43: 2020-04-04 gp_rt 3798.0  4765.425   3865.24712  1260.80  2527.75   3258.6
#&gt; 44: 2020-04-05 gp_rt 4354.0  5835.285   5374.74496  1506.80  2724.25   3688.4
#&gt; 45: 2020-04-06 gp_rt 4117.0  5799.364   6893.49504  1318.90  2614.50   3475.4
#&gt; 46: 2020-04-07 gp_rt 3570.5  7228.778  45827.83196  1107.00  2219.00   2959.2
#&gt; 47: 2020-04-08 gp_rt 2810.0 11207.838 134425.75998   834.75  1677.00   2305.6
#&gt;           date  type median      mean           sd lower_90 lower_50 lower_20
#&gt;     upper_20 upper_50 upper_90
#&gt;  1:     79.0    96.25   146.00
#&gt;  2:    124.0   149.00   235.10
#&gt;  3:    144.0   185.25   286.20
#&gt;  4:    166.0   207.25   319.05
#&gt;  5:    169.0   212.00   332.05
#&gt;  6:    224.0   278.25   429.05
#&gt;  7:    336.0   401.25   643.15
#&gt;  8:    293.0   358.25   559.15
#&gt;  9:    399.4   481.00   748.45
#&gt; 10:    441.0   543.00   885.05
#&gt; 11:    471.0   584.25   909.10
#&gt; 12:    464.4   560.50   862.50
#&gt; 13:    655.4   803.25  1265.30
#&gt; 14:    931.4  1187.00  1860.10
#&gt; 15:    883.4  1071.25  1706.75
#&gt; 16:   1225.0  1481.00  2451.25
#&gt; 17:   1391.2  1700.25  2735.15
#&gt; 18:   1480.2  1857.00  2995.65
#&gt; 19:   1454.4  1783.50  2702.10
#&gt; 20:   2018.0  2533.00  4036.55
#&gt; 21:   3037.4  3815.00  6052.35
#&gt; 22:   2697.0  3254.50  4903.05
#&gt; 23:   3626.8  4400.25  6903.95
#&gt; 24:   3835.8  4786.75  7228.05
#&gt; 25:   4030.2  4978.00  8000.05
#&gt; 26:   3606.4  4540.00  7167.60
#&gt; 27:   4763.2  5824.25  9694.35
#&gt; 28:   6291.6  7581.75 12339.05
#&gt; 29:   5044.4  6181.25  9349.00
#&gt; 30:   6272.8  7571.50 12406.60
#&gt; 31:   6228.4  7576.75 11521.55
#&gt; 32:   5769.2  7226.75 10693.20
#&gt; 33:   4878.4  5940.50  9884.85
#&gt; 34:   6004.0  7456.75 11797.45
#&gt; 35:   7208.2  8859.25 14459.10
#&gt; 36:   5539.4  6910.50 10995.10
#&gt; 37:   6381.2  7805.50 12008.00
#&gt; 38:   6162.6  7432.75 11741.75
#&gt; 39:   5331.8  6667.50 10906.95
#&gt; 40:   4300.6  5428.00  8571.90
#&gt; 41:   4951.8  6190.50 10378.80
#&gt; 42:   5939.4  7904.00 14443.30
#&gt; 43:   4436.4  5739.50 11436.55
#&gt; 44:   5201.0  7039.75 15002.25
#&gt; 45:   4805.0  6542.25 15550.60
#&gt; 46:   4327.6  6119.75 14761.15
#&gt; 47:   3385.4  4845.50 13181.10
#&gt;     upper_20 upper_50 upper_90
#&gt; 
#&gt; 
#&gt; $summary
#&gt;                                  measure              estimate
#&gt; 1: New confirmed cases by infection date   2529 (249 -- 19817)
#&gt; 2:        Expected change in daily cases                Unsure
#&gt; 3:            Effective reproduction no.      0.7 (0.2 -- 1.6)
#&gt; 4:                        Rate of growth -0.08 (-0.26 -- 0.16)
#&gt; 5:          Doubling/halving time (days)    -8.7 (4.3 -- -2.7)
#&gt;     numeric_estimate
#&gt; 1: &lt;data.table[1x9]&gt;
#&gt; 2:              0.75
#&gt; 3: &lt;data.table[1x9]&gt;
#&gt; 4: &lt;data.table[1x9]&gt;
#&gt; 5: &lt;data.table[1x9]&gt;
#&gt; 
#&gt; $plots
#&gt; $plots$infections</div><div class='img'><img src='epinow-1.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$reports</div><div class='img'><img src='epinow-2.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$reff</div><div class='img'><img src='epinow-3.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$growth_rate</div><div class='img'><img src='epinow-4.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; $plots$summary</div><div class='img'><img src='epinow-5.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; 
#&gt; </div><div class='input'>
<span class='co'># optional forecasting using EpiSoon plug-in</span>
<span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"EpiSoon"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
   <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"forecastHybrid"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
   <span class='co'># report Rt along with forecasts</span>
   <span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>epinow</span><span class='op'>(</span>reported_cases <span class='op'>=</span> <span class='va'>reported_cases</span>, samples <span class='op'>=</span> <span class='fl'>200</span>,
                 generation_time <span class='op'>=</span> <span class='va'>generation_time</span>, 
                 delays <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>incubation_period</span>, <span class='va'>reporting_delay</span><span class='op'>)</span>,
                 forecast_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
                     forecast_model <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>y</span>, <span class='va'>...</span><span class='op'>)</span><span class='op'>{</span>
                     <span class='fu'>EpiSoon</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/EpiSoon/man/forecastHybrid_model.html'>forecastHybrid_model</a></span><span class='op'>(</span>
                          y <span class='op'>=</span> <span class='va'>y</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>21</span><span class='op'>)</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>y</span><span class='op'>)</span><span class='op'>]</span>,
                          model_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>models <span class='op'>=</span> <span class='st'>"aefz"</span>, weights <span class='op'>=</span> <span class='st'>"equal"</span><span class='op'>)</span>,
                          forecast_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>PI.combination <span class='op'>=</span> <span class='st'>"mean"</span><span class='op'>)</span>, <span class='va'>...</span><span class='op'>)</span><span class='op'>}</span>
                          <span class='op'>)</span>,
                 stan_args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>warmup <span class='op'>=</span> <span class='fl'>200</span>, cores <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='fl'>4</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
    <span class='va'>out</span>
   <span class='op'>}</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; <span class='message'>Loading required namespace: EpiSoon</span></div><div class='output co'>#&gt; <span class='message'>Loading required namespace: forecastHybrid</span></div><div class='output co'>#&gt; <span class='message'>Registered S3 method overwritten by 'quantmod':</span>
#&gt; <span class='message'>  method            from</span>
#&gt; <span class='message'>  as.zoo.data.frame zoo </span></div><div class='output co'>#&gt; <span class='message'>Logging threshold set at INFO for the EpiNow2 logger</span></div><div class='output co'>#&gt; <span class='message'>Writing EpiNow2 logs to: /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpDy5hT0/regional-epinow/2020-04-01.log</span></div><div class='output co'>#&gt; <span class='message'>Logging threshold set at INFO for the EpiNow2.epinow logger</span></div><div class='output co'>#&gt; <span class='message'>Writing EpiNow2.epinow logs to: /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpDy5hT0/epinow/2020-04-01.log</span></div><div class='output co'>#&gt; <span class='message'>Logging threshold set at INFO for the EpiNow2.epinow.estimate_infections logger</span></div><div class='output co'>#&gt; <span class='message'>Writing EpiNow2.epinow.estimate_infections logs to: /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpDy5hT0/epinow-estimate-infections/2020-04-01.log</span></div><div class='output co'>#&gt; WARN [2020-10-17 10:43:47] epinow: The largest R-hat is 1.07, indicating chains have not mixed.
#&gt; Running the chains for more iterations may help. See
#&gt; http://mc-stan.org/misc/warnings.html#r-hat - 
#&gt; WARN [2020-10-17 10:43:47] epinow: Bulk Effective Samples Size (ESS) is too low, indicating posterior means and medians may be unreliable.
#&gt; Running the chains for more iterations may help. See
#&gt; http://mc-stan.org/misc/warnings.html#bulk-ess - 
#&gt; WARN [2020-10-17 10:43:48] epinow: Tail Effective Samples Size (ESS) is too low, indicating posterior variances and tail quantiles may be unreliable.
#&gt; Running the chains for more iterations may help. See
#&gt; http://mc-stan.org/misc/warnings.html#tail-ess - </div><div class='output co'>#&gt; <span class='error'>Error in data.table::rbindlist(list(reported_cases_rt$samples[, `:=`(type,     "rt")], reported_cases_cases$samples[, `:=`(type, "case")],     reported_cases_ensemble$samples[, `:=`(type, "ensemble")],     estimates$samples[variable == "reported_cases"][, .(date,         sample, cases = value, type = "gp_rt")]), use.names = TRUE): Column 3 ['cases'] of item 4 is missing in item 1. Use fill=TRUE to fill with NA (NULL for list columns), or use.names=FALSE to ignore column names.</span></div><div class='output co'>#&gt; <span class='message'>Timing stopped at: 388.3 0.467 388.9</span></div><div class='input'><span class='co'># }</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.samabbott.co.uk/'>Sam Abbott</a>, Joel Hellewell, Robin Thompson, Katelyn Gostic, Katharine Sherratt, Sophie Meakin, James Munday, Nikos Bosse, Joe Hickson, EpiForecasts, <a href='https://www.lshtm.ac.uk/aboutus/people/funk.sebastian'>Sebastian Funk</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


